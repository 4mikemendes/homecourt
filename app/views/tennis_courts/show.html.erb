<div class="container">

  <div class="search">
    <div class="d-flex align-items-center">
      <% if @tennis_court.user != current_user && @current_registration != nil%>
      <span class="badge"><%= @current_registration.status %></span>
      <nav class="navbar navbar-light">
        <%= simple_form_for([@tennis_court, @booking], html:{ class:"form-inline" }) do |f| %>
        <%= f.input :beginning_date_time%>
        <%= f.input :end_date_time, as: :string, input_html: {type: :time} %>
        <%= f.submit "Book now", class: "btn btn-primary ml-2" %>
          <% end %>
      </nav>
      <% elsif @tennis_court.user == current_user %>
      <% @tennis_court.bookings.each do |booking| %>
      <%= booking.user.email  %>
      <%= simple_form_for booking do |f| %>
      <%= f.input :status, collection: ["accepted", "rejected"] %>
      <%= f.submit %>
          <% end %>
        <% end %>
      <% else %>
      <nav class="navbar navbar-light">
        <%= simple_form_for([@tennis_court, @booking], html:{ class:"form-inline" }) do |f| %>
        <%= f.input :beginning_date_time%>
        <%= f.input :end_date_time, as: :string, input_html: {type: :time} %>
        <%= f.submit "Book now", class: "btn btn-primary ml-2" %>
          <% end %>
      </nav>
      <% end %>
    </div>
  </div>

  <div class="d-flex justify-content-center">
   <div class="text">
     <h1><%= @tennis_court.court_name %></h1>
     <h5><%= @tennis_court.description %></h5>
     <p><%= @tennis_court.surface_type %></p>
     <p><%= "#{@tennis_court.price_per_hour}â‚¬" %></p>
     <% if @tennis_court.user == current_user %>
     <small><%= link_to 'Edit', edit_tennis_court_path(@tennis_court) %></small>
     <small><%= link_to 'Delete', tennis_court_path(@tennis_court), method: :delete, data: { confirm: 'Are you sure?' } %></small>
     <% end %>
   </div>
   <br>
   <div id="map"
   style="height: 300px; width: 50%;"
   data-markers="<%= @markers.to_json %>"
   data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"></div>
 </div>
   <div class="container">
   <% if @tennis_court.photo.attached? %>
    <%= cl_image_tag @tennis_court.photo.key, height: 300, width: 400 %>
    <% else %>
    <%= image_tag "no-photo-available-icon-8.jpg" %>
    <% end %>
    </div>

 <%= link_to "Back to tennis courts", tennis_courts_path%>

 <hr class="my-5">
 <div class="row">
  <div class="col-12 col-sm-6">
    <h3>Reviews</h3>
    <% if @tennis_court.reviews.empty? %>
    <small><em class="text-muted">Be the first one to review this list</em></small>
    <% end %>
    <% @tennis_court.reviews.each do |review| %>
    <div>
      <small><em class="text-muted"><%= distance_of_time_in_words_to_now(review.created_at) %> ago</em></small>
      <p class="mb-0"><%= review.user.first_name %></p>
      <p class="mb-0"><%= review.content %></p>
      <p class="mb-0"><%= "ðŸŽ¾" * review.rating %></p>
    </div>
    <hr>
    <% end %>
  </div>
  <div class="col-12 col-sm-6">
    <div class="bg-white rounded p-3">
      <h5>Add your review</h5>
      <%= simple_form_for [@tennis_court, @review] do |f| %>
      <%= f.input :content %>
      <%= f.input :rating, collection: (1..5).to_a, label: "Rate your experience", id:"review_rating" %>
      <%= f.submit "Send your review" %>
      <% end %>
    </div>
  </div>
</div>
</div>
